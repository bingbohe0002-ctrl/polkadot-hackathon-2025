# PolkaVM Perpetual DEX

åŸºäº PolkaVMï¼Œå®Œå…¨å¼€æºé“¾ï¼ŒDAOè‡ªæ²»çš„é“¾ä¸ŠDEXï¼Œé‡‡ç”¨å®Œå…¨é“¾ä¸Šæ’®åˆçš„ CLOB è®¢å•ç°¿æ¨¡å‹ã€‚

<p align="center">
  <img src="images/pex.png" alt="PEX é¦–é¡µé¢„è§ˆ" />
</p>

## é¡¹ç›®ä»‹ç»ï¼šä¸ºä»€ä¹ˆéœ€è¦å®Œå…¨å»ä¸­å¿ƒåŒ–çš„äº¤æ˜“æ‰€ï¼ˆDEXï¼‰

è¿‡å»å¤šå¹´ï¼Œä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆCEXï¼‰åœ¨åŠ å¯†è¡Œä¸šå æ®äº†ç»å¯¹ä¸»å¯¼åœ°ä½ï¼Œä½†å…¶ç»“æ„æ€§é—®é¢˜å±¡å±¡å¼•å‘ç³»ç»Ÿæ€§é£é™©ï¼š
- é»‘ç®±è¿è¥ã€ä¿¡æ¯ä¸é€æ˜ï¼šä» FTX äº‹ä»¶åˆ°æœ€è¿‘çš„ 10.11 å¸å®‰ç†è´¢é¡¹ç›®å¼•å‘çš„å¸‚åœºæš´è·Œä¸ USDC è„±é”šï¼Œå¤–ç•Œå¯¹å…³é”®å†³ç­–ã€é£é™©æš´éœ²å’Œå†…éƒ¨æµåŠ¨æ€§çš„çœŸå®æƒ…å†µå‡ ä¹æ— ä»çŸ¥æ™“ã€‚
- æ‰˜ç®¡ä¸æŒªç”¨é£é™©ï¼šç”¨æˆ·èµ„äº§è¢«æ‰˜ç®¡åœ¨ä¸­å¿ƒåŒ–å¹³å°ï¼Œå­˜åœ¨å†è´¨æŠ¼ï¼ˆrehypothecationï¼‰ã€é”™é…æˆ–æŒªç”¨çš„æ½œåœ¨é£é™©ã€‚
- åˆ©ç›Šå†²çªä¸ä¸å…¬å¹³ï¼šåšå¸‚ã€ä¸Šå¸ã€é£æ§ã€æ¸…ç®—ä¸æ’®åˆç”±åŒä¸€ä¸»ä½“æŒæ§ï¼Œå­˜åœ¨å‰ç½®äº¤æ˜“ï¼ˆfront-runningï¼‰ã€ä¸å…¬å¹³ä¸Šå¸ä¸å¼ºåˆ¶æ€§æ¸…ç®—ç­‰äº‰è®®ã€‚
- äº‹æ•…ä¼ å¯¼æ•ˆåº”å¼ºï¼šä¸€æ¬¡é»‘ç®±æ“ä½œå°±å¯èƒ½è§¦å‘å¸‚åœºè¿é”ååº”ï¼Œå±±å¯¨å¸æš´è·Œç”šè‡³æ¥è¿‘å½’é›¶ï¼Œçˆ†ä»“èµ„é‡‘è½»æ˜“è¾¾åˆ°æ•°åäº¿ç¾å…ƒï¼Œä¸”â€œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆâ€æ— äººèƒ½ç¡®è¯ã€‚

æˆ‘ä»¬æ¨å‡º PEXï¼ˆPolkaVM Perpetual Exchangeï¼‰çš„ç›®æ ‡ï¼Œæ˜¯ç”¨å®Œå…¨ä¸Šé“¾ã€å¼€æºå¯éªŒè¯ã€ç¤¾åŒºæ²»ç†çš„æ–¹å¼ï¼Œæä¾›å¯ä¸ CEX æ¯”è‚©çš„ç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶æ¶ˆé™¤ä¸Šè¿°ç»“æ„æ€§é£é™©ï¼Œè®©äº¤æ˜“å›å½’é€æ˜ä¸å¯å®¡è®¡çš„ç§©åºã€‚

### é¡¹ç›®æ ¸å¿ƒç‰¹æ€§
- Lightning Fastï¼šå€ŸåŠ© PolkaVM çš„é«˜æ€§èƒ½æ‰§è¡Œç¯å¢ƒï¼Œå®ç°äºšç§’çº§çš„è®¢å•æ’®åˆä¸ç»“ç®—ï¼Œå¹¶å°† gas æˆæœ¬å‹åˆ°æä½æ°´å¹³ã€‚
- Fully Transparentï¼šæ‰€æœ‰äº¤æ˜“ã€ä»“ä½ä¸æ¸…ç®—éƒ½å‘ç”Ÿåœ¨é“¾ä¸Šï¼Œæ— éšè—æµç¨‹ï¼Œå®Œå…¨å¯å®¡è®¡ã€å¯éªŒè¯ï¼ŒçœŸæ­£çš„ä¿¡ä»»æœ€å°åŒ–ã€‚
- Professional Toolsï¼šä¸“ä¸šçº§äº¤æ˜“å·¥å…·ä¸ä½“éªŒâ€”â€”é«˜çº§å›¾è¡¨ã€å®æ—¶è®¢å•ç°¿ã€æŠ•èµ„ç»„åˆåˆ†æä»¥åŠå®Œå–„çš„é£é™©ç®¡ç†å·¥å…·ã€‚
- Cross-Chain Readyï¼šæ„å»ºäºæ³¢å¡ï¼ˆPolkadotï¼‰ç”Ÿæ€ï¼Œå…·å¤‡å¤©ç„¶è·¨é“¾å…¼å®¹èƒ½åŠ›ï¼Œæ”¯æŒå¤šé“¾èµ„äº§äº¤æ˜“ä¸æ‰©å±•ã€‚
- High Leverageï¼šåœ¨å¥å…¨é£é™©å¼•æ“ä¸æ¸…ç®—ä¿æŠ¤ä¸‹ï¼Œæ”¯æŒä¸»æµåŠ å¯†èµ„äº§æœ€é«˜ 100x æ æ†äº¤æ˜“ã€‚
- DAO Governedï¼šDEX å®Œå…¨ç”± DAO è‡ªæ²»ã€‚ä¸æ”¶ä¸Šå¸è´¹ï¼Œä½†ä¹Ÿä¸æ˜¯â€œä»€ä¹ˆå¸éƒ½èƒ½ä¸Šâ€ï¼Œè€Œæ˜¯ç”±ç¤¾åŒºå‘èµ·ææ¡ˆå¹¶æŠ•ç¥¨å†³å®šã€‚å¼€å‘ã€è¿è¥ã€å•†åŠ¡å·¥ä½œç”± DAO åä½œæ¨è¿›ï¼Œå…³é”®å‚æ•°ï¼ˆå¦‚è´¹ç”¨ç»“æ„ã€é£æ§å‚æ•°ã€å¸‚åœºè®¾ç½®ï¼‰ç”±ç¤¾åŒºæ²»ç†å…±è¯†å†³å®šã€‚
- Open Sourceï¼šå®Œæ•´å¼€æºã€é€æ˜å¯å®¡è®¡ï¼Œé¼“åŠ±ç¤¾åŒºè´¡çŒ®ï¼Œå®‰å…¨æ€§å¯è¢«ç‹¬ç«‹éªŒè¯ã€‚
- Fully Decentralizedï¼šåè®®è§„åˆ™ç”±æ™ºèƒ½åˆçº¦å¼ºåˆ¶æ‰§è¡Œï¼Œæ— ä»»ä½•ä¸­å¿ƒåŒ–æ§åˆ¶è·¯å¾„ã€‚
- Built for Buildersï¼šä»¥â€œè®©çœŸæ­£çš„å»ºè®¾è€…å‘å…‰â€ä¸ºä½¿å‘½ã€‚å½“å‰å¸‚åœºçš„â€œåŠ£å¸é©±é€è‰¯å¸â€ç°è±¡ä¸¥é‡ï¼Œè®¸å¤šä»£å¸éµå¾ªâ€œå‘å¸â€”ç‚’ä½œâ€”æ‹‰ç›˜â€”å‡ºè´§â€”å½’é›¶â€çš„ç”Ÿå‘½å‘¨æœŸï¼Œç©ºæ°”å¸æ¨ªè¡Œï¼ŒçœŸæ­£å…·å¤‡é•¿æœŸä»·å€¼çš„äº§å“è¢«æ·¹æ²¡ã€‚ä¼ ç»Ÿäº¤æ˜“æ‰€å¹¶æœªä¸ºæœ‰ä»·å€¼é¡¹ç›®æä¾›ä¼˜è´¨çš„äºŒçº§å¸‚åœºèèµ„ä¸å‘ç°æœºåˆ¶ã€‚PEX ä¸“æ³¨ä¸ºçœŸæ­£çš„ web3 builders æä¾›èèµ„ä¸æµåŠ¨æ€§å¹³å°ï¼Œä¸ºä»·å€¼æŠ•èµ„è€…æä¾›å‘ç°å¹¶æ”¯æŒé«˜è´¨é‡é¡¹ç›®çš„åœºæ‰€ï¼Œè®©åŠ å¯†å¸‚åœºå›å½’ä»·å€¼ï¼Œè€Œéæ— æ­¢å¢ƒçš„æŠ•æœºã€‚

> æ„¿æ™¯ï¼šåœ¨ä¸ç‰ºç‰²ç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œé€šè¿‡é“¾ä¸Šæ’®åˆä¸å®Œæ•´é€æ˜ï¼Œé‡å»ºäº¤æ˜“çš„ä¿¡ä»»ä¸ç§©åºï¼›é€šè¿‡ DAO åä½œä¸å¼€æºå…±å»ºï¼Œè®©åè®®æŒç»­è¿­ä»£ä¸è¿›åŒ–ï¼›é€šè¿‡è·¨é“¾èƒ½åŠ›ä¸é«˜æ€§èƒ½æ‰§è¡Œï¼Œå°†å»ä¸­å¿ƒåŒ–çš„ä¼˜åŠ¿å¸¦å…¥æ›´å¹¿æ³›çš„èµ„äº§ä¸ç”¨æˆ·ç¾¤ä½“ã€‚

## é¡¹ç›®æ¶æ„

```
pex/
â”œâ”€â”€ contracts/                    # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒä¸äº¤æ˜“æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderBook.sol
â”‚   â”‚   â”‚   â”œâ”€â”€ PerpMarket.sol
â”‚   â”‚   â”‚   â”œâ”€â”€ MarginVault.sol
â”‚   â”‚   â”‚   â”œâ”€â”€ RiskEngine.sol
â”‚   â”‚   â”‚   â”œâ”€â”€ SpotMarket.sol
â”‚   â”‚   â”‚   â”œâ”€â”€ SpotOrderBook.sol
â”‚   â”‚   â”‚   â””â”€â”€ FeeCollector.sol
â”‚   â”‚   â”œâ”€â”€ governance/          # æ²»ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ TokenListingGovernor.sol
â”‚   â”‚   â”‚   â””â”€â”€ Governance.sol
â”‚   â”‚   â”œâ”€â”€ oracle/              # é¢„è¨€æœºé€‚é…
â”‚   â”‚   â”‚   â””â”€â”€ OracleAdapter.sol
â”‚   â”‚   â”œâ”€â”€ interfaces/          # æ¥å£å®šä¹‰ï¼ˆå« ISpot/Perp ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ libraries/           # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ mocks/               # æµ‹è¯•æ¨¡æ‹Ÿåˆçº¦
â”‚   â”‚   â””â”€â”€ tokens/              # è¾…åŠ©ä»£å¸
â”‚   â”‚       â”œâ”€â”€ PEXToken.sol
â”‚   â”‚       â””â”€â”€ SimpleERC20.sol
â”‚   â”œâ”€â”€ test/                    # åˆçº¦æµ‹è¯•
â”‚   â”œâ”€â”€ script/                  # åˆçº¦çº§éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ foundry.toml
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ scripts/                     # é¡¶å±‚è¿ç»´è„šæœ¬ï¼ˆä¸€é”®éƒ¨ç½²ã€æˆæƒã€æ£€æŸ¥ç­‰ï¼‰
â”‚   â”œâ”€â”€ deploy-assethub-all.js
â”‚   â”œâ”€â”€ grant-spot-governor.js
â”‚   â”œâ”€â”€ add-pas-markets-assethub.js
â”‚   â””â”€â”€ ...ï¼ˆå…¶ä½™å·¥å…·ä¸æ£€æŸ¥è„šæœ¬ï¼‰
â”œâ”€â”€ deploy/                      # hardhat-deploy åˆ†æ­¥è„šæœ¬
â”œâ”€â”€ deployments/
â”‚   â””â”€â”€ assethub/
â”‚       â””â”€â”€ deployment.json      # éƒ¨ç½²å¿«ç…§ï¼ˆè„šæœ¬/å‰ç«¯è¯»å–ï¼‰
â”œâ”€â”€ frontend/                    # Next.js å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                 # App Router
â”‚   â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶ï¼ˆtrading/spot ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ lib/                 # åˆçº¦åœ°å€/ABI/å·¥å…·
â”‚   â”‚   â”œâ”€â”€ store/               # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/               # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ next.config.js
â”œâ”€â”€ indexer/                     # Subsquid ç´¢å¼•å™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ schema.graphql
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ images/
â”‚   â””â”€â”€ pex.png                  # README é…å›¾
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ Deployment-Guide.md
â”‚   â””â”€â”€ contract-architecture.md
â”œâ”€â”€ hardhat.config.js
â”œâ”€â”€ foundry.toml
â”œâ”€â”€ .env
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## æŠ€æœ¯æ ˆ

### æ™ºèƒ½åˆçº¦
- Solidity 0.8+
- Foundry + Hardhat
- OpenZeppelin
- PolkaVM å…¼å®¹

### å‰ç«¯
- Next.js 15
- TypeScript
- TailwindCSS
- Zustand
- Wagmi + ethers.js
- TradingView Widget

### åç«¯åŸºç¡€è®¾æ–½
- Subsquid Indexer
- WebSocket Gateway
- Oracle Price Updater

## å¿«é€Ÿå¼€å§‹

è¯·æŸ¥çœ‹ [Deployment-Guide.md](docs/Deployment-Guide.md) äº†è§£è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸ”¥ å®Œå…¨é“¾ä¸Šæ’®åˆçš„ orderbook
- âš¡ é«˜æ€§èƒ½çš„ PolkaVM æ‰§è¡Œç¯å¢ƒ
- ğŸ’° å¤šèµ„äº§ä¿è¯é‡‘ç³»ç»Ÿ
- ğŸ¯ å®æ—¶é£é™©ç®¡ç†å’Œæ¸…ç®—
- ğŸ“Š ä¸“ä¸šçº§äº¤æ˜“ç•Œé¢
- ğŸ›ï¸ DAO æ²»ç†æœºåˆ¶
- ğŸ” é€æ˜çš„é“¾ä¸Šæ•°æ®

## å¼€å‘é˜¶æ®µ

- [x] Phase 1: MVP